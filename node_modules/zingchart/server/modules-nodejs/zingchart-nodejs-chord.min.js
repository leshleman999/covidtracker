/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.8
*/
zingchart.setModule("chord"),function(){var e;ZC.AE3=((e=function(){this.AEN="palette",this.C2="#6a921f",this.BP=[],this.SX=.8,this.AEI=.1,this.AEG=0,this.AEF=5,this.iGroupPadding=10,this.iGroupOffset=0,this.JE=1,this.K9=!1,this.AGH=function(){for(var e=(16777215*Math.random()+1<<0).toString(16);e.length<6;)e="0"+e;return"#"+e}}).getDefaults=function(l){var t={};return ZC._cp_(e.B8,t),e.NY[l]&&ZC._cp_(e.NY[l],t),t},e.B8={palette:[],"border-color-1":"#999","border-color-2":"#666",alpha:.75,tick:{"line-color":"#666",flat:!0,"line-width":1},item:{color:"#333","offset-r":0},label:{"auto-align":!0,color:"#333","offset-r":0},"value-box":{visible:!1}},e.NY={light:{palette:[["#7CA82B","#7CA82B","#638F12"],["#29A2CC","#29A2CC","#1089B3"],["#D31E1E","#D31E1E","#BA0505"],["#EF8535","#EF8535","#D66C1C"],["#A05F18","#A05F18","#874600"],["#265E96","#265E96","#0D457D"],["#6B7075","#6B7075","#52575C"]],"border-color-1":"#000","border-color-2":"#fff",alpha:1,tick:{"line-color":"#666"}},dark:{palette:[["#7CA82B","#7CA82B","#638F12"],["#29A2CC","#29A2CC","#1089B3"],["#D31E1E","#D31E1E","#BA0505"],["#EF8535","#EF8535","#D66C1C"],["#A05F18","#A05F18","#874600"],["#265E96","#265E96","#0D457D"],["#6B7075","#6B7075","#52575C"]],"border-color-1":"#221F1F","border-color-2":"#221F1F",alpha:1,tick:{"line-color":"#58595B"},item:{color:"#fff"},label:{color:"#D1D3D4"}}},e);var l={},t={},n=null,a=null,_=-1,o=-1;zingchart.bind(null,"dataparse",function(e,r){var i,C,p,s,g,u,Z=zingchart.getLoader(e.id);zingchart.initThemes(Z);for(var d=ZC.AE3.getDefaults(e.theme),c=0,h=r.graphset.length;c<h;c++)if("chord"===r.graphset[c].type){var f=r.graphset[c].type,v=r.graphset[c],A={};v.options&&(A=v.options[f]||v.options),ZC._todash_(A),null!==ZC._n_(n)&&(v.shapes=[],ZC._cpa_(n,v.shapes)),null!==ZC._n_(a)&&(v.labels=[],ZC._cpa_(a,v.labels));var b=new ZC.AE3;l["chord-"+e.id+"-"+c]=b,null!==ZC._n_(i=A["color-type"])&&(b.AEN=i),null!==ZC._n_(i=A.color)&&(b.C2=ZC.AP.GC(i)),null!==ZC._n_(i=A.palette)?b.BP=i:d.palette.length>0&&(b.BP=d.palette),null!==ZC._n_(i=A.radius)&&(b.SX=ZC._f_(ZC.II(i))),null!==ZC._n_(i=A["band-width"])&&(b.AEI=ZC._f_(ZC.II(i))),null!==ZC._n_(i=A["band-space"])&&(b.AEG=ZC._f_(ZC.II(i))),null!==ZC._n_(i=A["angle-padding"])&&(b.AEF=ZC._i_(i)),null!==ZC._n_(i=A["group-padding"])&&(b.iGroupPadding=ZC._i_(i)),null!==ZC._n_(i=A["group-offset"])&&(b.iGroupOffset=ZC._i_(i)),null!==ZC._n_(i=A["size-factor"])&&(b.JE=ZC._f_(i)),null!==ZC._n_(i=A.flat)&&(b.K9=ZC._b_(i));var x=v.series;for(C=0;C<x.length;C++)x[C]["sort-index"]=C;var y=[];x.sort(function(e,l){return null!==ZC._n_(e.group)&&-1===ZC.AV(y,ZC._i_(e.group))&&y.push(ZC._i_(e.group)),null!==ZC._n_(l.group)&&-1===ZC.AV(y,ZC._i_(l.group))&&y.push(ZC._i_(l.group)),null!==ZC._n_(e.group)&&null!==ZC._n_(l.group)&&ZC._i_(e.group)-ZC._i_(l.group)!=0?ZC._i_(e.group)-ZC._i_(l.group):e["sort-index"]-l["sort-index"]});var E=ZC.BQ(y.length,1),m=t["chord-"+e.id+"-"+c]||[],B=m.length,M=0;for(C=0,p=x.length;C<p;C++)if(0===B||B>0&&-1===ZC.AV(m,C))for(g=0,u=(s=x[C].values||[]).length;g<u;g++)(0===B||B>0&&-1===ZC.AV(m,g))&&(M+=ZC._f_(s[g]));var F=0;for(C=0,p=x.length;C<p;C++)(0===B||B>0&&-1===ZC.AV(m,C))&&F++;if(-1===_&&(_=x.length),-1===o)for(C=0,p=x.length;C<p;C++)s=x[C].values||[],o=ZC.BQ(o,s.length);v.shapes||(v.shapes=[]),n||(n=[],ZC._cpa_(v.shapes,n));var N=v.shapes;v.labels||(v.labels=[]),a||(a=[],ZC._cpa_(v.labels,a));var k,V,w,D,G,I,z,P,Q,X,L=v.labels;v.legend&&(v.legend["toggle-action"]="none");var S,Y=360-b.AEF*F-b.iGroupPadding*(E>1?E:0),O=[],R=[],J=[],U=0,H=0,K=null,T=!1;for(C=0,p=x.length;C<p;C++){ZC._todash_(x[C]),S=1,null!==ZC._n_(x[C].group)&&(S=ZC._i_(x[C].group)),T=!1,H=0,null===K&&null!==ZC._n_(x[C].group)?K=ZC._i_(x[C].group):ZC._i_(x[C].group)!==K&&(K=ZC._i_(x[C].group),T=!0),T&&C>0&&(H=b.iGroupPadding);var j=b.C2;if("palette"===b.AEN)if(b.BP.length>0)j=b.BP[C%b.BP.length];else j=zingchart.getPalette(Z,C,"bar")[1];else"random"===b.AEN&&(j=b.AGH());if(0===B||B>0&&-1===ZC.AV(m,C)){null===ZC._n_(x[C]["background-color"])&&(x[C]["background-color"]=j),x[C].visible=!0;var q={},W=0;for(g=0,u=(s=x[C].values||[]).length;g<u;g++)(0===B||B>0&&-1===ZC.AV(m,g))&&(W+=ZC._f_(s[g]));for(var $ in q["angle-start"]=U+H,q["angle-end"]=q["angle-start"]+Y*W/M,q.group=S,q.total=W,q.values=x[C].values,x[C])"data-"===$.substr(0,5)&&(q[$]=x[C][$]);U=q["angle-end"]+b.AEF,O.push(q);var ee=zingchart.getInstance(Z,"style");ee.append(x[C]),ee.parse(),R[C]=ee,v.legend&&ZC._cp_({"legend-marker":{alpha:.75,"background-color-1":ee.A0,"background-color-2":ee.AE}},x[C]),z={"background-color":"#fff",color:"#333","border-width":1,"border-color":d["border-color-1"],padding:10},null!==ZC._n_(A.style)&&null!==ZC._n_(i=A.style.tooltip)&&ZC._cp_(i,z);var le=x[C].text||"";z.text=le;var te={alpha:d.alpha,"border-width":0,"background-color":ee.A0+" "+ee.AE,tooltip:z};null!==ZC._n_(A.style)&&null!==ZC._n_(i=A.style.band)&&ZC._cp_(i,te),null!==ZC._n_(x[C].style)&&null!==ZC._n_(i=x[C].style.band)&&ZC._cp_(i,te),ZC._cp_({type:"pie",id:"segment_"+C,"angle-start":q["angle-start"],"angle-end":q["angle-end"]},te),te.tooltip.text=te.tooltip.text.replace(/%text/gi,le),J.push(te)}else x[C].visible=!1,O.push(null),J.push(null)}var ne=0;if(E>1){var ae=Number.MAX_VALUE,_e=-Number.MAX_VALUE;for(C=0,p=O.length;C<p;C++)1===O[C].group&&(ae=Math.min(ae,O[C]["angle-start"]),_e=Math.max(_e,O[C]["angle-end"]));ne=(_e-ae)/2}for(ne+=b.iGroupOffset,C=0,p=O.length;C<p;C++)O[C]&&J[C]&&(O[C]["angle-start"]-=ne,O[C]["angle-end"]-=ne,J[C]["angle-start"]-=ne,J[C]["angle-end"]-=ne,N.push(J[C]));var oe,re=Number.MAX_VALUE;if(0!==M){for(C=0,p=O.length;C<p;C++)if(0===B||B>0&&-1===ZC.AV(m,C)){var ie=Math.pow(10,Math.floor(Math.log(O[C].total)/Math.LN10));ie>0&&(re=ZC.CY(re,ie))}for(;!((oe=Y*re/M)<15);)re/=2}else re=1;var Ce,pe,se,ge,ue,Ze,de,ce=Math.min(0,Math.ceil(Math.log(re)/Math.LN10)+1),he=0,fe=0;for(C=0,p=O.length;C<p;C++)if(0===B||B>0&&-1===ZC.AV(m,C))for(Ce=0,pe=ZC.BQ(1,Math.floor(10/oe)),k=O[C]["angle-start"];k<O[C]["angle-end"];k+=oe)Ce%pe==0&&(ue=(se=Ce*re).toFixed(ce),se>=1e3&&(ue=se/1e3+"k"),se>=1e6&&(ue=se/1e6+"M"),ge={},ZC._cp_(d.item,ge),null!==ZC._n_(A.style)&&null!==ZC._n_(i=A.style.item)&&ZC._cp_(i,ge),null!==ZC._n_(x[C].style)&&null!==ZC._n_(i=x[C].style.item)&&ZC._cp_(i,ge),ge.text=ue,ZC._todash_(ge),(Ze=zingchart.getInstance(Z,"textbox")).append(ge),Ze.parse(),fe=Math.max(fe,Ze.DV),he=Math.max(he,Ze.I)),Ce++;var ve,Ae=0,be=0,xe=0;for(C=0;C<x.length;C++)ue=x[C].text||"",ve={},ZC._cp_(d.label,ve),null!==ZC._n_(A.style)&&null!==ZC._n_(i=A.style.label)&&ZC._cp_(i,ve),null!==ZC._n_(x[C].style)&&null!==ZC._n_(i=x[C].style.label)&&ZC._cp_(i,ve),ve.text=ue,ZC._todash_(ve),(de=zingchart.getInstance(Z,"textbox")).append(ve),de.parse(),xe=Math.max(xe,de.DV),Ae=Math.max(Ae,de.I),be=Math.max(be,de.F);if(v.plotarea)for(var ye=["margin","margin-top","margin-right","margin-bottom","margin-left"],Ee=0;Ee<ye.length;Ee++)"dynamic"===v.plotarea[ye[Ee]]&&(0===de.A9?v.plotarea[ye[Ee]]=he+fe+be-20:v.plotarea[ye[Ee]]=he+fe+Ae-20);var me,Be,Me=zingchart.getGraphInfo(Z,r,c),Fe=Me.plotarea.x+Me.plotarea.width/2,Ne=Me.plotarea.y+Me.plotarea.height/2,ke=Me.graph.x+Fe,Ve=Me.graph.y+Ne;for(me=b.SX>1?ZC._i_(b.SX):ZC._i_(b.SX*ZC.CY(Me.plotarea.width/2,Me.plotarea.height/2)),me*=b.JE,Be=b.AEI>1?me-ZC._i_(b.AEI):ZC._i_((1-b.AEI)*me),b.AEG<1&&(b.AEG=ZC._i_(b.AEG*me)),C=0,p=N.length;C<p;C++)N[C].id&&0===N[C].id.indexOf("segment_")&&(N[C].x=Fe,N[C].y=Ne,N[C].size=me,N[C].slice=Be);for(C=0,p=O.length;C<p;C++)if(0===B||B>0&&-1===ZC.AV(m,C)){Ce=0;var we=[],De={};ZC._cp_(d.tick,De),null!==ZC._n_(A.style)&&null!==ZC._n_(i=A.style.tick)&&ZC._cp_(i,De),null!==ZC._n_(x[C].style)&&null!==ZC._n_(i=x[C].style.tick)&&ZC._cp_(i,De);var Ge=De.size||5;for(pe=ZC.BQ(1,Math.floor(10/oe)),I=30,k=O[C]["angle-start"];k<O[C]["angle-end"];k+=oe){var Ie=ZC.AQ.BN(ke,Ve,me,k+.1),ze=ZC.AQ.BN(ke,Ve,me+Ge,k+.1);we.push(Ie,ze,null),Ce%pe==0&&(ue=(se=Ce*re).toFixed(ce),se>=1e3&&(ue=se/1e3+"k"),se>=1e6&&(ue=se/1e6+"M"),V=k,w="left",k>90&&k<270&&(V=k-180,w="right"),ge={},ZC._cp_(d.item,ge),null!==ZC._n_(A.style)&&null!==ZC._n_(i=A.style.item)&&ZC._cp_(i,ge),null!==ZC._n_(x[C].style)&&null!==ZC._n_(i=x[C].style.item)&&ZC._cp_(i,ge),I=ge.width||he,G=ZC._i_(ge["offset-r"]||"0"),D=ZC.AQ.BN(Fe,Ne,me+Ge+G+I/2,k+.1),ZC._cp_({anchor:"c",flat:!0,x:ZC._i_(D[0]),y:ZC._i_(D[1]),width:I,angle:V,"text-align":w,text:ue},ge),("undefined"==typeof ge.visible||ZC._b_(ge.visible))&&L.push(ge)),Ce++}ZC._cp_({type:"line",id:"ticks"+C,points:we},De),("undefined"==typeof De.visible||ZC._b_(De.visible))&&N.push(De),V=k=(O[C]["angle-start"]+O[C]["angle-end"])/2,k<0&&(k+=360),k%=360,w="center",0===de.A9?k>=0&&k<=180?V-=90:V+=90:k>=0&&k<=90||k>=270&&k<=360?V-=90:V+=90;var Pe={};ZC._cp_(d["value-box"],Pe),null!==ZC._n_(v.plot)&&null!==ZC._n_(i=v.plot["value-box"])&&ZC._cp_(i,Pe),null!==ZC._n_(i=x[C]["value-box"])&&ZC._cp_(i,Pe);var Qe=ZC.AQ.BN(ke,Ve,(me+Be)/2,(O[C]["angle-start"]+O[C]["angle-end"])/2),Xe=V;null===ZC._n_(Pe.angle)&&null===ZC._n_(Pe["font-angle"])||(Pe["auto-align"]?null!==ZC._n_(Pe.angle)?Xe+=ZC._f_(Pe.angle):Xe+=ZC._f_(Pe["font-angle"]):Xe=null!==ZC._n_(Pe.angle)?ZC._f_(Pe.angle):ZC._f_(Pe["font-angle"])),ZC._cp_({id:"vbox_"+C,anchor:"c",angle:Xe,x:Qe[0],y:Qe[1],flat:!0},Pe),Pe.text=Pe.text||"%node-value",Pe.text=Pe.text.replace(/%plot-text/gi,x[C].text||"").replace(/%node-value/gi,O[C].total),("undefined"==typeof Pe.visible||ZC._b_(Pe.visible))&&L.push(Pe),ve={},ZC._cp_(d.label,ve),null!==ZC._n_(A.style)&&null!==ZC._n_(i=A.style.label)&&ZC._cp_(i,ve),null!==ZC._n_(x[C].style)&&null!==ZC._n_(i=x[C].style.label)&&ZC._cp_(i,ve),Q=ve.width||Ae,X=ve.height||be,P=ZC._i_(ve["offset-r"]||"0"),null===ZC._n_(ve.angle)&&null===ZC._n_(ve["font-angle"])||(ve["auto-align"]?(null!==ZC._n_(ve.angle)?V+=ZC._f_(ve.angle):V+=ZC._f_(ve["font-angle"]),0!==de.A9&&(w=k>=0&&k<=90||k>=270&&k<=360?"left":"right")):V=null!==ZC._n_(ve.angle)?ZC._f_(ve.angle):ZC._f_(ve["font-angle"])),D=0===de.A9?ZC.AQ.BN(Fe,Ne,me+Ge+G+I+P+X,k):ZC.AQ.BN(Fe,Ne,me+Ge+G+I+P+Q/2,k),ZC._cp_({anchor:"c",flat:!0,x:ZC._i_(D[0]),y:ZC._i_(D[1]),width:Q,angle:V,"font-angle":V,"text-align":w,text:x[C].text},ve),("undefined"==typeof ve.visible||ZC._b_(ve.visible))&&L.push(ve)}var Le=Be-b.AEG;for(C=0,p=O.length;C<p;C++)if(0===B||B>0&&-1===ZC.AV(m,C))for(g=0,u=O.length;g<p;g++)if(0===B||B>0&&-1===ZC.AV(m,g)){for(var Se=0,Ye=0,Oe=0;Oe<g;Oe++)(0===B||B>0&&-1===ZC.AV(m,Oe))&&("undefined"==typeof O[C].values[Oe]&&(O[C].values[Oe]=0),Se+=O[C].values[Oe]);for(Oe=0;Oe<C;Oe++)(0===B||B>0&&-1===ZC.AV(m,Oe))&&("undefined"==typeof O[g].values[Oe]&&(O[g].values[Oe]=0),Ye+=O[g].values[Oe]);var Re=0;"undefined"!=typeof O[C].values[g]&&(Re=O[C].values[g]);var Je=0;"undefined"!=typeof O[g].values[C]&&(Je=O[g].values[C]);var Ue=O[C]["angle-start"]+(O[C]["angle-end"]-O[C]["angle-start"])*Se/O[C].total,He=Ue+(O[C]["angle-end"]-O[C]["angle-start"])*Re/O[C].total,Ke=O[g]["angle-start"]+(O[g]["angle-end"]-O[g]["angle-start"])*Ye/O[g].total,Te=Ke+(O[g]["angle-end"]-O[g]["angle-start"])*Je/O[g].total;0===O[C].total&&(Ue=O[C]["angle-start"],He=O[C]["angle-end"]),0===O[g].total&&(Ke=O[g]["angle-start"],Te=O[g]["angle-end"]);var je=ZC.AQ.BN(ke,Ve,Le,Ue),qe=ZC.AQ.BN(ke,Ve,Le,Ke);z={"background-color":"#fff",color:"#333","border-width":1,"border-color":d["border-color-1"],padding:10},null!==ZC._n_(A.style)&&null!==ZC._n_(i=A.style.tooltip)&&ZC._cp_(i,z);var We=x[C].text||"",$e=x[g].text||"",el={},ll=[];if(C===g?(z.text=We+":"+O[C].values[g],ll=[[je[0],je[1]],[ke,Ve,Le,Ue,He,0],[ke,Ve,je[0],je[1]]]):C<=g&&(z.text=We+" -> "+$e+":"+O[C].values[g]+"<br>"+$e+" -> "+We+":"+O[g].values[C],ll=[[je[0],je[1]],[ke,Ve,Le,Ue,He,0],[ke,Ve,qe[0],qe[1]],[ke,Ve,Le,Ke,Te,0],[ke,Ve,je[0],je[1]]]),ll.length>0){var tl=Re>=Je?C:g;ZC._cp_({"background-color":R[tl].A0+" "+R[tl].AE,alpha:.75,"border-width":1,"border-color":d["border-color-2"],tooltip:z},el),null!==ZC._n_(A.style)&&null!==ZC._n_(i=A.style.chord)&&ZC._cp_(i,el),null!==ZC._n_(x[C].style)&&null!==ZC._n_(i=x[C].style.chord)&&ZC._cp_(i,el),ZC._cp_({type:"poly",id:"chord_"+C+"_"+g,dynamic:!0,"fast-vector-path":!0,points:ll},el),C!==g&&null!==ZC._n_(i=el.tooltip["text-chord"])&&(el.tooltip.text=i),el.tooltip.text=el.tooltip.text.replace(/%text-destination/gi,$e).replace(/%value-destination/gi,O[g].values[C]).replace(/%text-source/gi,We).replace(/%value-source/gi,O[C].values[g]).replace(/%text/gi,We).replace(/%value/gi,O[C].values[g]);var nl=null;for(var $ in O[C])"data-"===$.substr(0,5)&&(nl=new RegExp("%"+$+"-destination","g"),el.tooltip.text=el.tooltip.text.replace(nl,O[C][$][g]||""));for(var $ in O[g])"data-"===$.substr(0,5)&&(nl=new RegExp("%"+$+"-source","g"),el.tooltip.text=el.tooltip.text.replace(nl,O[g][$][C]||""));nl=new RegExp("%data-([a-zA-Z0-9]+)-(source|destination)","g"),el.tooltip.text=el.tooltip.text.replace(nl,""),nl=new RegExp("%data-([a-zA-Z0-9]+)","g"),el.tooltip.text=el.tooltip.text.replace(nl,""),("undefined"==typeof el.visible||ZC._b_(el.visible))&&(0===Re&&0===Je||N.push(el))}}}return r})}();